Array.prototype.remove = Array.prototype.remove || function(a, b) {
    var c = this.slice((b || a) + 1 || this.length);
    return this.length = 0 > a ? this.length + a : a, this.push.apply(this, c);
}, String.prototype.substitute = function(a) {
    return this.replace(/\{(.+?)\}/g, function(b, c) {
        return c in a ? a[c] : b;
    });
}, "create" in Object.prototype || (Object.create = function() {
    function a() {}
    return function(b) {
        if (1 != arguments.length) throw new Error("Object.create implementation only accepts one parameter.");
        return a.prototype = b, new a();
    };
}()), Object.compare = function(a, b) {
    for (var c in a) {
        if (a.hasOwnProperty(c) !== b.hasOwnProperty(c)) return !1;
        switch (typeof a[c]) {
          case "object":
            if (!Object.compare(a[c], b[c])) return !1;
            break;

          case "function":
            if ("undefined" == typeof b[c] || "compare" != c && a[c].toString() != b[c].toString()) return !1;
            break;

          default:
            if (a[c] != b[c]) return !1;
        }
    }
    for (var c in b) if ("undefined" == typeof a[c]) return !1;
    return !0;
};

var getElementsByClassName = function(a, b, c) {
    return (getElementsByClassName = document.getElementsByClassName ? function(a, b, c) {
        c = c || document;
        for (var d, e = c.getElementsByClassName(a), f = b ? new RegExp("\\b" + b + "\\b", "i") : null, g = [], h = 0, i = e.length; i > h; h += 1) d = e[h], 
        (!f || f.test(d.nodeName)) && g.push(d);
        return g;
    } : document.evaluate ? function(a, b, c) {
        b = b || "*", c = c || document;
        for (var d, e, f = a.split(" "), g = "", h = "http://www.w3.org/1999/xhtml", i = document.documentElement.namespaceURI === h ? h : null, j = [], k = 0, l = f.length; l > k; k += 1) g += "[contains(concat(' ', @class, ' '), ' " + f[k] + " ')]";
        try {
            d = document.evaluate(".//" + b + g, c, i, 0, null);
        } catch (m) {
            d = document.evaluate(".//" + b + g, c, null, 0, null);
        }
        for (;e = d.iterateNext(); ) j.push(e);
        return j;
    } : function(a, b, c) {
        b = b || "*", c = c || document;
        for (var d, e, f = a.split(" "), g = [], h = "*" === b && c.all ? c.all : c.getElementsByTagName(b), i = [], j = 0, k = f.length; k > j; j += 1) g.push(new RegExp("(^|\\s)" + f[j] + "(\\s|$)"));
        for (var l = 0, m = h.length; m > l; l += 1) {
            d = h[l], e = !1;
            for (var n = 0, o = g.length; o > n && (e = g[n].test(d.className), e); n += 1) ;
            e && i.push(d);
        }
        return i;
    })(a, b, c);
}, hasClass = function(a, b) {
    return new RegExp(" " + b + " ").test(" " + a.className + " ");
}, addClass = function(a, b) {
    hasClass(a, b) || (a.className += " " + b);
}, removeClass = function(a, b) {
    var c = " " + a.className.replace(/[\t\r\n]/g, " ") + " ";
    if (hasClass(a, b)) {
        for (;c.indexOf(" " + b + " ") >= 0; ) c = c.replace(" " + b + " ", " ");
        a.className = c.replace(/^\s+|\s+$/g, "");
    }
};

Array.prototype.forEach || (Array.prototype.forEach = function(a, b) {
    var c, d;
    if (null == this) throw new TypeError(" this is null or not defined");
    var e = Object(this), f = e.length >>> 0;
    if ("function" != typeof a) throw new TypeError(a + " is not a function");
    for (b && (c = b), d = 0; f > d; ) {
        var g;
        d in e && (g = e[d], a.call(c, g, d, e)), d++;
    }
}), Array.prototype.filter || (Array.prototype.filter = function(a) {
    "use strict";
    if (void 0 === this || null === this) throw new TypeError();
    var b = Object(this), c = b.length >>> 0;
    if ("function" != typeof a) throw new TypeError();
    for (var d = [], e = arguments.length >= 2 ? arguments[1] : void 0, f = 0; c > f; f++) if (f in b) {
        var g = b[f];
        a.call(e, g, f, b) && d.push(g);
    }
    return d;
}), "map" in Array.prototype || (Array.prototype.map = function(a, b) {
    for (var c = this.length >>> 0, d = Array(c), e = 0; c > e; e++) e in this && (d[e] = a.call(b, this[e], e, this));
    return d;
}), Function.prototype.bind || (Function.prototype.bind = function(a) {
    if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    var b = Array.prototype.slice.call(arguments, 1), c = this, d = function() {}, e = function() {
        return c.apply(this instanceof d && a ? this : a, b.concat(Array.prototype.slice.call(arguments)));
    };
    return d.prototype = this.prototype, e.prototype = new d(), e;
}), this.Element && Element.prototype.attachEvent && !Element.prototype.addEventListener && function() {
    function a(a, b) {
        Window.prototype[a] = HTMLDocument.prototype[a] = Element.prototype[a] = b;
    }
    function b() {
        b.interval && document.body && (b.interval = clearInterval(b.interval), document.dispatchEvent(new CustomEvent("DOMContentLoaded")));
    }
    a("addEventListener", function(a, b) {
        var c = this, d = c.addEventListener.listeners = c.addEventListener.listeners || {}, e = d[a] = d[a] || [];
        e.length || c.attachEvent("on" + a, e.event = function(a) {
            var b = c.document && c.document.documentElement || c.documentElement || {
                scrollLeft: 0,
                scrollTop: 0
            };
            a.currentTarget = c, a.pageX = a.clientX + b.scrollLeft, a.pageY = a.clientY + b.scrollTop, 
            a.preventDefault = function() {
                a.returnValue = !1;
            }, a.relatedTarget = a.fromElement || null, a.stopImmediatePropagation = function() {
                h = !1, a.cancelBubble = !0;
            }, a.stopPropagation = function() {
                a.cancelBubble = !0;
            }, a.target = a.srcElement || c, a.timeStamp = +new Date();
            for (var d, f = 0, g = [].concat(e), h = !0; h && (d = g[f]); ++f) for (var i, j = 0; i = e[j]; ++j) if (i == d) {
                i.call(c, a);
                break;
            }
        }), e.push(b);
    }), a("removeEventListener", function(a, b) {
        for (var c, d = this, e = d.addEventListener.listeners = d.addEventListener.listeners || {}, f = e[a] = e[a] || [], g = f.length - 1; c = f[g]; --g) if (c == b) {
            f.splice(g, 1);
            break;
        }
        !f.length && f.event && d.detachEvent("on" + a, f.event);
    }), a("dispatchEvent", function(a) {
        var b = this, c = a.type, d = b.addEventListener.listeners = b.addEventListener.listeners || {}, e = d[c] = d[c] || [];
        try {
            return b.fireEvent("on" + c, a);
        } catch (f) {
            return void (e.event && e.event(a));
        }
    }), Object.defineProperty(Window.prototype, "CustomEvent", {
        get: function() {
            var a = this;
            return function(b, c) {
                var d, e = a.document.createEventObject();
                e.type = b;
                for (d in c) "cancelable" == d ? e.returnValue = !c.cancelable : "bubbles" == d ? e.cancelBubble = !c.bubbles : "detail" == d && (e.detail = c.detail);
                return e;
            };
        }
    }), b.interval = setInterval(b, 1), window.addEventListener("load", b);
}(), !this.CustomEvent && function() {
    window.CustomEvent = function(a, b) {
        var c;
        b = b || {
            bubbles: !1,
            cancelable: !1,
            detail: void 0
        };
        try {
            c = document.createEvent("CustomEvent"), c.initCustomEvent(a, b.bubbles, b.cancelable, b.detail);
        } catch (d) {
            c = document.createEvent("Event"), c.initEvent(a, b.bubbles, b.cancelable), c.detail = b.detail;
        }
        return c;
    };
}(), window.log = function a() {
    if (log.history = log.history || [], log.history.push(arguments), this.console) {
        var b, c = arguments;
        try {
            c.callee = a.caller;
        } catch (d) {}
        b = [].slice.call(c), "object" == typeof console.log ? log.apply.call(console.log, console, b) : console.log.apply(console, b);
    }
};

var TMW = window.TMW || {};

TMW.TwitterPoll = {
    socket: null,
    wallContent: null,
    POWER_LEVEL: null,
    ACTIONTYPE: null,
    TWEET: null,
    MODALWINDOW: document.querySelector(".modal"),
    MODALTITLE: document.querySelector(".modal-title"),
    MODALSUBTITLE: document.querySelector(".modal-subtitle"),
    MODALCONTENT: document.querySelector(".modal-content"),
    btnConfirm: document.querySelector(".btn--true"),
    btnCancel: document.querySelector(".btn--false"),
    CURRENTLEVEL: null,
    contentACTIONTYPE: null,
    init: function() {
        this.wallContent = document.querySelector("#wall-content"), this.makeSocketConnection(), 
        this.EventListeners.onPageStart(), this.EventListeners.onPowerChange();
    },
    makeSocketConnection: function() {
        log("script.js :: making connection");
        var a = window.location.hostname;
        this.socket = io.connect(a);
    },
    EventListeners: {
        POWER_LEVEL: document.querySelector(".slider"),
        onPageStart: function() {
            log("script.js :: setup event listener :: onPageStart"), TMW.TwitterPoll.socket.on("state", TMW.TwitterPoll.setupScreen), 
            TMW.TwitterPoll.setMeter(), TMW.TwitterPoll.updatePower(), TMW.TwitterPoll.btnConfirm.addEventListener("click", function() {
                "send" === TMW.TwitterPoll.ACTIONTYPE && TMW.TwitterPoll.sendTweet(TMW.TwitterPoll.TWEET), 
                addClass(TMW.TwitterPoll.MODALWINDOW, "is-hidden");
            }), TMW.TwitterPoll.btnCancel.addEventListener("click", function() {
                addClass(TMW.TwitterPoll.MODALWINDOW, "is-hidden");
            });
        },
        onTweet: function() {
            TMW.TwitterPoll.socket.on("tweet", TMW.TwitterPoll.tweetRecieved);
        },
        onSmash: function() {
            TMW.TwitterPoll.socket.emit("tweet-sent", TMW.TwitterPoll.CURRENTLEVEL + "@snapshot");
        },
        onPowerChange: function() {
            this.POWER_LEVEL.addEventListener("change", TMW.TwitterPoll.updatePower, !1);
        },
        onSendTweet: function(a, b) {
            TMW.TwitterPoll.ACTIONTYPE = "send", TMW.TwitterPoll.TWEET = b, TMW.TwitterPoll.checkAction("send", b);
        },
        onDeleteTweet: function(a, b) {
            log(b), TMW.TwitterPoll.ACTIONTYPE = "delete", TMW.TwitterPoll.TWEET = b, TMW.TwitterPoll.destroyTweet(TMW.TwitterPoll.TWEET);
        }
    },
    setupScreen: function(a) {
        a.tags.join(", ");
        TMW.TwitterPoll.EventListeners.onTweet();
    },
    setMeter: function() {
        for (var a = document.querySelector(".slider").getAttribute("max"), b = document.querySelector(".meter"), c = parseInt(a); c >= 0; c -= 1) {
            var d = document.createElement("li");
            d.className = "step step-" + [ c ], d.setAttribute("data-index", [ c ]), d.innerHTML = [ c ], 
            b.appendChild(d);
        }
        var e = TMW.TwitterPoll.createEl("button", "SMASH!", "section--power", "btn btn--smash");
        e.addEventListener("click", TMW.TwitterPoll.EventListeners.onSmash);
    },
    createEl: function(a, b, c, d) {
        var e = document.createElement(a), f = document.createTextNode(b);
        if (e.className = d, e.appendChild(f), null != c) {
            var g = document.querySelector("." + c);
            g.appendChild(e);
        }
        return e;
    },
    tweetRecieved: function(a) {
        var b, c = document.createElement("div"), d = document.createElement("div");
        c.className = "tweet-content g-col g-span8", d.className = "tweet-btns g-col g-span4", 
        b = document.createElement("li"), b.className = "tweet tweet-" + a.id;
        var e = TMW.TwitterPoll.createEl("button", "Send", null, "btn btn--send"), f = TMW.TwitterPoll.createEl("button", "Delete", null, "btn btn--delete");
        e.addEventListener("click", function(b) {
            TMW.TwitterPoll.EventListeners.onSendTweet(b, a);
        }), f.addEventListener("click", function(b) {
            TMW.TwitterPoll.EventListeners.onDeleteTweet(b, a);
        }), d.appendChild(f), d.appendChild(e);
        var g = document.createElement("a");
        g.setAttribute("href", "http://www.twitter.com/" + a.screenName), g.setAttribute("target", "_new"), 
        g.className = "tweet-title", g.innerHTML = "@" + a.screenName;
        var h = document.createElement("p");
        h.className = "content tweet-text", h.innerHTML = a.text, c.appendChild(g), c.appendChild(h), 
        b.appendChild(c), b.appendChild(d), TMW.TwitterPoll.wallContent.appendChild(b), 
        document.querySelector("#last-update").innerHTML = new Date().toTimeString();
    },
    checkAction: function(a, b) {
        var c = b.name;
        "send" === TMW.TwitterPoll.ACTIONTYPE ? (TMW.TwitterPoll.MODALTITLE.innerHTML = "SEND TO BAT?", 
        TMW.TwitterPoll.MODALCONTENT.innerHTML = b.text, removeClass(TMW.TwitterPoll.MODALWINDOW, "modal--delete")) : (TMW.TwitterPoll.MODALTITLE.innerHTML = "REMOVE TWEET?", 
        TMW.TwitterPoll.MODALCONTENT.innerHTML = b.text, addClass(TMW.TwitterPoll.MODALWINDOW, "modal--delete")), 
        removeClass(TMW.TwitterPoll.MODALWINDOW, "is-hidden"), TMW.TwitterPoll.MODALSUBTITLE.innerHTML = "@" + c;
    },
    updatePower: function() {
        TMW.TwitterPoll.CURRENTLEVEL = document.querySelector(".slider").value;
        for (var a = document.querySelectorAll(".step"), b = a.length - 1; b >= 0; b -= 1) {
            var c = a[b].getAttribute("data-index");
            c <= TMW.TwitterPoll.CURRENTLEVEL ? addClass(a[b], "active") : c > TMW.TwitterPoll.CURRENTLEVEL && removeClass(a[b], "active");
        }
    },
    destroyTweet: function(a) {
        var b = document.querySelector(".tweet-" + a.id);
        addClass(b, "inactive");
    },
    sendTweet: function(a) {
        TMW.TwitterPoll.CURRENTLEVEL = document.querySelector(".slider").value;
        var b = document.querySelector(".tweet-" + a.id);
        addClass(b, "sent"), TMW.TwitterPoll.socket.emit("tweet-sent", TMW.TwitterPoll.CURRENTLEVEL + "@" + a.screenName);
    }
}, Element.prototype.prependChild = function(a) {
    this.insertBefore(a, this.firstChild);
}, TMW.TwitterPoll.init();
//# sourceMappingURL=app.min.js.map